!function(){var e,t,o,n={80:function(e){var t=$('meta[name="csrf-token"]').attr("content");var o={toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:!1,callbacks:{onImageUpload:function(e){var o,n,a;o=e[0],n=this,(a=new FormData).append("image",o),a.append("_token",t),$.ajax({url:"/admin/upload/image",cache:!1,contentType:!1,processData:!1,data:a,type:"post",success:function(e){var t='<picture>\n                <source srcSet="/uploads/'.concat(e.urls.webp,'" type="image/webp">\n                <img src="/uploads/').concat(e.urls.original,'" alt="описание"/>\n            </picture>');$(n).summernote("pasteHTML",t)},error:function(e){console.log("error",e)}})}}};e.exports={module:{rules:[{test:/\.css$/,loader:"exports-loader",use:["style-loader","css-loader"]}]},token:t,summernote_config:o}}},a={};function r(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={exports:{}};return n[e](o,o.exports,r),o.exports}e=r(80),t=e.token,o=e.summernote_config,$(document).ready((function(){$(".editor").each((function(e){var t=this.id;$("#".concat(t)).summernote(o),$("#".concat(t))[0].value=$("#".concat(t)).summernote("code"),$("#".concat(t)).on("summernote.change",(function(e){$("#".concat(t))[0].value=$("#".concat(t)).summernote("code")}))}))})),$(document).on("click",".add-iteration-module",(function(e){var t=this;$.ajax({method:"get",url:this.dataset.template_url,success:function(e){var o=document.createElement("template");t.before(o),o.outerHTML=e.html}})})),$(document).on("click",".module-item.remove-iteration",(function(e){$("#iteration_".concat(this.dataset.iteration_id)).remove(),$("#module_items_form").append('<input type="hidden" name="remove_iterations[]" value="'.concat(this.dataset.iteration_id,'">'))})),$(document).on("click",".module-item.remove-repeater",(function(e){$("#repeater_".concat(this.dataset.iteration_id)).remove()})),$(document).on("change",".module-item-file-input",(function(e){var t=this.dataset.id,o=new FileReader;o.readAsDataURL(this.files[0]),o.onload=function(e){document.getElementById("optionImage_".concat(t)).src=this.result}})),$(document).on("submit","#module_items_form",(function(e){e.preventDefault();var o=new FormData(this);o.append("_token",t),$.ajax({method:this.method,url:this.action,data:o,dataType:"JSON",contentType:!1,cache:!1,processData:!1,success:function(e){e.errors?(alert.show(),$.each(e.errors,(function(e,t){alert.append("<p>".concat(t,"</p>"))}))):e.status&&(document.location.href=e.redirectTo)}})}))}();
//# sourceMappingURL=form.js.map